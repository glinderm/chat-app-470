(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{37:function(e,t,a){},67:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(36),r=a.n(n),i=(a(34),a(67),a(37),a(0)),j=a.n(i),l=a(4),b=a(15),o=a(85),d=a(83),u=a(84),p=a(80),h=a(48),O=(a(69),a(78),h.a.initializeApp({apiKey:"AIzaSyA47rt-dBAdeVVVbCqPxtgfbcWmUv3zOAE",authDomain:"c470chatapp.firebaseapp.com",databaseURL:"https://c470chatapp-default-rtdb.firebaseio.com",projectId:"c470chatapp",storageBucket:"c470chatapp.appspot.com",messagingSenderId:"539063625518",appId:"1:539063625518:web:58080cf2b0ce8e81047cbf"}),h.a.database().ref("chats"),h.a.auth()),x=a(3),m=s.a.createContext();function f(){return Object(c.useContext)(m)}function v(e){var t=e.children,a=Object(c.useState)(),s=Object(b.a)(a,2),n=s[0],r=s[1],i=Object(c.useState)(!0),j=Object(b.a)(i,2),l=j[0],o=j[1];Object(c.useEffect)((function(){return O.onAuthStateChanged((function(e){r(e),o(!1)}))}),[]);var d={currentUser:n,signup:function(e,t){return O.createUserWithEmailAndPassword(e,t)},login:function(e,t){return O.signInWithEmailAndPassword(e,t)},logout:function(){return O.signOut()},resetPassword:function(e){return O.sendPasswordResetEmail(e)},updateEmail:function(e){return n.updateEmail(e)},updatePassword:function(e){return n.updatePassword(e)}};return Object(x.jsx)(m.Provider,{value:d,children:!l&&t})}var g=a(22),w=a(19);function y(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),s=f().signup,n=Object(c.useState)(""),r=Object(b.a)(n,2),i=r[0],h=r[1],O=Object(c.useState)(!1),m=Object(b.a)(O,2),v=m[0],y=m[1],N=Object(w.g)();function S(){return(S=Object(l.a)(j.a.mark((function c(n){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),t.current.value===a.current.value){c.next=3;break}return c.abrupt("return",h("Passwords do not match"));case 3:return c.prev=3,h(""),y(!0),c.next=8,s(e.current.value,t.current.value);case 8:N.push("/"),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(3),h("Failed to create account");case 14:y(!1);case 15:case"end":return c.stop()}}),c,null,[[3,11]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{children:Object(x.jsxs)(o.a.Body,{className:"card-body",children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),i&&Object(x.jsx)(d.a,{variant:"danger",children:i}),Object(x.jsxs)(u.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(x.jsxs)(u.a.Group,{id:"email",children:[Object(x.jsx)(u.a.Label,{children:"Email"}),Object(x.jsx)(u.a.Control,{type:"email",ref:e,required:!0,className:"signup-btn"})]}),Object(x.jsxs)(u.a.Group,{id:"password",children:[Object(x.jsx)(u.a.Label,{children:"Password"}),Object(x.jsx)(u.a.Control,{type:"password",ref:t,required:!0,className:"signup-btn"})]}),Object(x.jsxs)(u.a.Group,{id:"password-confirm",children:[Object(x.jsx)(u.a.Label,{children:"Confirm Password"}),Object(x.jsx)(u.a.Control,{type:"password",ref:a,required:!0,className:"signup-btn"})]}),Object(x.jsx)(p.a,{disabled:v,type:"submit",children:"Sign Up"})]})]})}),Object(x.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(x.jsx)(g.b,{to:"/login",children:"Login"})]})]})}function N(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),a=t[0],s=t[1],n=f(),r=n.currentUser,i=n.logout,u=Object(w.g)();function h(){return(h=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(""),e.prev=1,e.next=4,i();case 4:u.pushState("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.a,{children:Object(x.jsxs)(o.a.Body,{className:"card-body",children:[Object(x.jsx)("h2",{children:"Profile"}),a&&Object(x.jsx)(d.a,{variant:"danger",children:a}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Username: "})," ",r.username]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Email: "})," ",r.email]}),Object(x.jsx)("p",{}),Object(x.jsx)("p",{}),Object(x.jsxs)("p",{children:[Object(x.jsx)(g.b,{to:"/chat-room",className:"btn btn-success",children:"Chatroom"}),Object(x.jsx)(g.b,{to:"/update-profile",className:"btn btn-primary",children:"Profile Settings"})]})]})}),Object(x.jsx)("div",{className:"w-100 text-center mt-2",children:Object(x.jsx)(p.a,{variant:"link",onClick:function(){return h.apply(this,arguments)},children:"Log Out"})})]})}function S(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=f().login,s=Object(c.useState)(""),n=Object(b.a)(s,2),r=n[0],i=n[1],h=Object(c.useState)(!1),O=Object(b.a)(h,2),m=O[0],v=O[1],y=Object(w.g)();function N(){return(N=Object(l.a)(j.a.mark((function c(s){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),c.prev=1,i(""),v(!0),c.next=6,a(e.current.value,t.current.value);case 6:y.push("/"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),i("Failed to sign in");case 12:v(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{children:Object(x.jsxs)(o.a.Body,{className:"card-body",children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Login"}),r&&Object(x.jsx)(d.a,{variant:"danger",children:r}),Object(x.jsxs)(u.a,{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(x.jsxs)(u.a.Group,{id:"email",children:[Object(x.jsx)(u.a.Label,{children:"Email"}),Object(x.jsx)(u.a.Control,{type:"email",ref:e,required:!0,className:"signup-btn"})]}),Object(x.jsxs)(u.a.Group,{id:"password",children:[Object(x.jsx)(u.a.Label,{children:"Password"}),Object(x.jsx)(u.a.Control,{type:"password",ref:t,required:!0,className:"signup-btn"})]}),Object(x.jsx)(p.a,{disabled:m,type:"submit",children:"Login"})]}),Object(x.jsx)("div",{className:"w-100 text-center mt-3",children:Object(x.jsx)(g.b,{to:"/forgot-password",children:"Forgot your password?"})})]})}),Object(x.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(x.jsx)(g.b,{to:"/signup",children:"Sign up here!"})]})]})}function C(){var e=Object(c.useRef)(),t=f().resetPassword,a=Object(c.useState)(""),s=Object(b.a)(a,2),n=s[0],r=s[1],i=Object(c.useState)(!1),h=Object(b.a)(i,2),O=h[0],m=h[1],v=Object(c.useState)(""),w=Object(b.a)(v,2),y=w[0],N=w[1];function S(){return(S=Object(l.a)(j.a.mark((function a(c){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),a.prev=1,N(""),r(""),m(!0),a.next=7,t(e.current.value);case 7:N("Check your email inbox for your password reset"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),r("Failed to reset password");case 13:m(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{children:Object(x.jsxs)(o.a.Body,{className:"card-body",children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Reset my password"}),n&&Object(x.jsx)(d.a,{variant:"danger",children:n}),y&&Object(x.jsx)(d.a,{variant:"success",children:y}),Object(x.jsxs)(u.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(x.jsxs)(u.a.Group,{id:"email",children:[Object(x.jsx)(u.a.Label,{children:"Email"}),Object(x.jsx)(u.a.Control,{type:"email",ref:e,required:!0,className:"signup-btn"})]}),Object(x.jsx)(p.a,{disabled:O,type:"submit",children:"Reset Password"})]}),Object(x.jsx)("div",{className:"w-100 text-center mt-3",children:Object(x.jsx)(g.b,{to:"/login",children:"Login"})})]})}),Object(x.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(x.jsx)(g.b,{to:"/signup",children:"Sign up here!"})]})]})}var P=a(9),L=a(13),k=["component"];function E(e){var t=e.component,a=Object(L.a)(e,k),c=f().currentUser;return Object(x.jsx)(w.b,Object(P.a)(Object(P.a)({},a),{},{render:function(e){return c?Object(x.jsx)(t,Object(P.a)({},e)):Object(x.jsx)(w.a,{to:"/login"})}}))}function R(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),s=f(),n=s.currentUser,r=s.updatePassword,i=s.updateEmail,j=Object(c.useState)(""),l=Object(b.a)(j,2),h=l[0],O=l[1],m=Object(c.useState)(!1),v=Object(b.a)(m,2),y=v[0],N=v[1],S=Object(w.g)();return Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{children:Object(x.jsxs)(o.a.Body,{className:"card-body",children:[Object(x.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),h&&Object(x.jsx)(d.a,{variant:"danger",children:h}),Object(x.jsxs)(u.a,{onSubmit:function(c){if(c.preventDefault(),t.current.value!==a.current.value)return O("Passwords do not match");var s=[];N(!0),O(""),e.current.value!==n.email&&s.push(i(e.current.value)),t.current.value&&s.push(r(t.current.value)),Promise.all(s).then((function(){S.push("/")})).catch((function(){O("Failed to update account")})).finally((function(){N(!1)}))},children:[Object(x.jsxs)(u.a.Group,{id:"email",children:[Object(x.jsx)(u.a.Label,{children:"Email"}),Object(x.jsx)(u.a.Control,{type:"email",ref:e,required:!0,defaultValue:n.email,className:"signup-btn"})]}),Object(x.jsxs)(u.a.Group,{id:"password",children:[Object(x.jsx)(u.a.Label,{children:"Password"}),Object(x.jsx)(u.a.Control,{type:"password",ref:t,placeholder:"Leave blank to leave the same",className:"signup-btn"})]}),Object(x.jsxs)(u.a.Group,{id:"password-confirm",children:[Object(x.jsx)(u.a.Label,{children:"Confirm Password"}),Object(x.jsx)(u.a.Control,{type:"password",ref:a,placeholder:"Leave blank to leave the same",className:"signup-btn"})]}),Object(x.jsx)(p.a,{disabled:y,type:"submit",children:"Update"})]})]})}),Object(x.jsx)("div",{className:"w-100 text-center mt-2",children:Object(x.jsx)(g.b,{to:"/",children:"Cancel"})})]})}var A=a(81),U=a(82),B=a(61);function G(){var e=0;return Object(x.jsx)("div",{className:"chatroom-page",id:"chat-main",children:Object(x.jsx)(A.a,{className:"App",fluid:!0,children:Object(x.jsx)(U.a,{className:"main-page",children:Object(x.jsxs)(B.a,{className:"main-page",children:[Object(x.jsx)(U.a,{className:"App-header",children:Object(x.jsx)("h6",{children:"Echo Chamber"})}),Object(x.jsx)(U.a,{className:"App-body",children:Object(x.jsx)("div",{className:"chatlog-body",id:"chat-body",children:Object(x.jsx)("table",{id:"chat-table",class:"table table-striped table-responsive",children:Object(x.jsx)("tbody",{})})})}),Object(x.jsx)(U.a,{className:"App-chatbox",children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"text",name:"chat-input",id:"chat-input"}),Object(x.jsx)(p.a,{type:"submit",id:"chat-submit",onClick:function(){var t=document.getElementById("chat-input");if(""!==t.value){var a=document.getElementById("chat-table").insertRow(e),c=a.insertCell(0),s=a.insertCell(1);s.innerHTML=t.value,s.className="chat-row",c.innerHTML=e,a.id="chat-"+e,c.scope="row",c.className="msg-index",t.value="",e++}},children:"Send"})]})})]})})})})}var q=function(){return Object(x.jsx)("div",{children:Object(x.jsx)(g.a,{children:Object(x.jsx)(v,{children:Object(x.jsxs)(w.d,{children:[Object(x.jsx)(E,{exact:!0,path:"/",component:N}),Object(x.jsx)(E,{path:"/update-profile",component:R}),Object(x.jsx)(E,{path:"/chat-room",component:G}),Object(x.jsx)(w.b,{path:"/signup",component:y}),Object(x.jsx)(w.b,{path:"/login",component:S}),Object(x.jsx)(w.b,{path:"/chat-app-470",component:S}),Object(x.jsx)(w.b,{path:"/forgot-password",component:C})]})})})})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.3d4200c5.chunk.js.map